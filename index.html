<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Geldtelapp</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <meta name="apple-mobile-web-app-title" content="Geldtelapp">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
    <header id="header">
        <img src="assets/logo.svg" alt="Geldtelapp logo">
    </header>
    <section class="totals">
        <div class="totals_container bills-total">
            <h6>Biljetten</h6>
            <p>€10,00</p>
        </div>
        <div class="totals_container coins-total">
            <h6>Munten</h6>
            <p>€10,00</p>
        </div>
        <div class="totals_container cumulative">
            <h6>Totaal</h6>
            <p id="pdf-cumulative-total">€20,00</p>
        </div>
    </section>
    <section class="euro-section bills">
        <div class="category"> 
            <h2>Biljetten</h2>
            <hr>
        </div>
        <div class="container">
            <div class="container_two">
             <div class="denomination five" data-denomination="5">
                <div class="visual">
                    <img src="./assets/EUR5-snip.png" alt="Vijf euro biljet">
                    <p>€5</p>
                </div>
                <div class="controls five">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
            </div>

                <div class="denomination ten" data-denomination="10">
                <div class="visual">
                    <img src="./assets/EUR10-snip.png" alt="10 euro biljet">
                    <p>€10</p>
                </div>
                <div class="controls ten">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
             </div>
            </div>

            <div class="container_two">
            <div class="denomination twenty" data-denomination="20">
                <div class="visual">
                    <img src="./assets/EUR20-snip.png" alt="20 euro biljet">
                    <p>€20</p>
                </div>
                <div class="controls twenty">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
            </div>

            <div class="denomination fifty" data-denomination="50">
                <div class="visual">
                    <img src="./assets/EUR50-snip.png" alt="50 euro biljet">
                    <p>€50</p>
                </div>
                <div class="controls fifty">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
            </div>
            </div>

            <div class="container_two">
            <div class="denomination hundred" data-denomination="100">
                <div class="visual">
                    <img src="./assets/EUR100-snip.png" alt="100 euro biljet">
                    <p>€100</p>
                </div>
                <div class="controls hundred">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
            </div>

            <div class="denomination two-hundred" data-denomination="200">
                <div class="visual">
                    <img src="./assets/EUR200-snip.png" alt="200 euro biljet">
                    <p>€200</p>
                </div>
                <div class="controls two-hundred">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
            </div>
            </div>

        </div>
       
    </section>
    <section class="euro-section coins">
        <div class="category"> 
            <h2>Munten</h2>
            <hr>
        </div>
        <div class="container">
            <div class="container_two">
             <div class="denomination five-cent" data-denomination="0.05">
                <div class="visual-coin">
                    <img src="./assets/5ct.png" alt="5 euro cent">
                    <p>5 ct</p>
                </div>
                <div class="controls five-cent">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
            </div>

            <div class="denomination ten-cent" data-denomination="0.10">
                <div class="visual-coin">
                    <img src="./assets/10ct.png" alt="10 euro cent">
                    <p>10 ct</p>
                </div>
                <div class="controls ten-cent">
                    <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                    <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                    <p class="value">0</p>
                    <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                </div>
             </div>
            </div>

            <div class="container_two">
                <div class="denomination twenty-cent" data-denomination="0.20">
                    <div class="visual-coin">
                        <img src="./assets/20ct.png" alt="10 euro cent">
                        <p>20 ct</p>
                    </div>
                    <div class="controls twenty-cent">
                        <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                        <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                        <p class="value">0</p>
                        <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                    </div>
                 </div>

                 <div class="denomination fifty-cent" data-denomination="0.50">
                    <div class="visual-coin">
                        <img src="./assets/50ct.png" alt="10 euro cent">
                        <p>50 ct</p>
                    </div>
                    <div class="controls fifty-cent">
                        <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                        <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                        <p class="value">0</p>
                        <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                    </div>
                 </div>
            </div>

            <div class="container_two">
                <div class="denomination one" data-denomination="1">
                    <div class="visual-coin">
                        <img src="./assets/1eur.png" alt="1 euro munt">
                        <p>€1</p>
                    </div>
                    <div class="controls one-eur-coin">
                        <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                        <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                        <p class="value">0</p>
                        <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                    </div>
                 </div>

                 <div class="denomination two" data-denomination="2">
                    <div class="visual-coin">
                        <img src="./assets/2eur.png" alt="2 euro munt">
                        <p>€2</p>
                    </div>
                    <div class="controls two-eur-coin">
                        <button class="reset-input secondary"><img src="assets/trash.svg" alt="Verwijder input"></button>
                        <button class="remove secondary"><img src="assets/Minus.svg" alt="Minder"></button>
                        <p class="value">0</p>
                        <button class="add"><img src="assets/Plus.svg" alt="Meer"></button>
                    </div>
                 </div>
            </div>

        </div>
       
    </section>
    <section class="pdf-section">
        <button id="generate-pdf">Teloverzicht opslaan als PDF</button>
        <button id="reset-all-values">Reset Alle Waarden</button>
    </section>
    <div id="pdf-content">
        <header>
            <img src="assets/logo.svg" alt="Geldtelapp logo" style="width: 100px;">
        </header>
        <section class="pdf-totals">
            <h2>Teloverzicht</h2>
            <p id="pdf-date-time"></p>
            <h3>Biljetten</h3>
            <div id="pdf-bills-details"></div>
            <h3>Munten</h3>
            <div id="pdf-coins-details"></div>
            
            <p>--- EINDE RAPPORT ---</p>
        </section>
    </div>
    <section class="reset-section">
    </section>
    

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            function updateTotals() {
    let totalBills = 0;
    let totalCoins = 0;

    // Loop door alle biljetten en tel hun waardes op
    $('.bills .denomination').each(function() {
        let denomination = parseFloat($(this).data('denomination')) || 0;  // Haal de waarde van het biljet op
        let quantity = parseInt($(this).find('.value').text()) || 0;      // Haal het aantal op

        totalBills += denomination * quantity;  // Tel de waarde van dit biljet op bij het totaal
    });

    // Loop door alle munten en tel hun waardes op
    $('.coins .denomination').each(function() {
        let denomination = parseFloat($(this).data('denomination')) || 0;  // Haal de waarde van de munt op
        let quantity = parseInt($(this).find('.value').text()) || 0;      // Haal het aantal op

        totalCoins += denomination * quantity;  // Tel de waarde van deze munt op bij het totaal
    });

    // Update totaal voor biljetten en munten
    $('.bills-total p').text('€' + totalBills.toFixed(2));
    $('.coins-total p').text('€' + totalCoins.toFixed(2));

    // Update het cumulatieve totaal
    let cumulativeTotal = totalBills + totalCoins;
    $('.cumulative p').text('€' + cumulativeTotal.toFixed(2));

    // Log de huidige tussenstand naar de console
    console.log('Totaal biljetten:', '€' + totalBills.toFixed(2));
    console.log('Totaal munten:', '€' + totalCoins.toFixed(2));
    console.log('Totaal (cumulatief):', '€' + cumulativeTotal.toFixed(2));
}

    
            // Functie om het aantal van een biljet of munt te verhogen/verlagen/resetten
            function updateValue($element, increment) {
                let $valueElement = $element.closest('.controls').find('.value');
                let currentValue = parseInt($valueElement.text()) || 0;  // Zorg ervoor dat currentValue een getal is
    
                if (increment === 'reset') {
                    currentValue = 0;
                } else {
                    currentValue = currentValue + increment;
                    if (currentValue < 0) currentValue = 0; // Zorg ervoor dat de waarde niet negatief wordt
                }
    
                $valueElement.text(currentValue);
                updateTotals(); // Update de totalen na verandering
            }
    
            // Event listeners voor de knoppen
            $('.add').click(function() {
                updateValue($(this), 1);
            });
    
            $('.remove').click(function() {
                updateValue($(this), -1);
            });
    
            $('.reset-input').click(function() {
                updateValue($(this), 'reset');
            });

            $('#reset-all-values').click(function() {
                $('.denomination .value').text('0'); // Reset alle waarden naar 0
                updateTotals(); // Werk de totalen bij na reset
            });

            //Visueel toevoegen
            $('.visual').click(function() {
            let $denomination = $(this).closest('.denomination');
            updateValue($denomination.find('.add'), 1);
            });

            $('.visual-coin').click(function() {
            let $denomination = $(this).closest('.denomination');
            updateValue($denomination.find('.add'), 1);
            });

    
            // Initialiseer totalen bij pagina-lading
            updateTotals();
        });

        // Functie om de PDF te genereren
        $('#generate-pdf').click(function() {
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF();
                
                // Voeg de titel en datum toe
                pdf.setFontSize(18);
                pdf.setFont('Courier')
                pdf.text('GELDTELAPP - TELRAPPORT', 10, 10);
                pdf.setFontSize(12);
                pdf.text('DATUM VAN AFDRUK: ' + new Date().toLocaleString(), 10, 20);
                pdf.text('--- BEGIN RAPPORT ---', 10, 30);
                
                // Voeg de biljetten toe
                pdf.setFontSize(14);
                pdf.text('BILJETTEN', 10, 40);
                pdf.setFontSize(12);
                $('.bills .denomination').each(function(index) {
                    let denomination = $(this).find('.visual p').text();
                    let quantity = $(this).find('.value').text();
                    if (parseInt(quantity) > 0) {
                        pdf.text(`${denomination} ${quantity}x`, 10, 50 + (10 * index));
                    }
                });

                // Voeg de munten toe
                pdf.setFontSize(14);
                pdf.text('MUNTEN', 10, 60 + (10 * $('.bills .denomination').length));
                pdf.setFontSize(12);
                $('.coins .denomination').each(function(index) {
                    let denomination = $(this).find('.visual-coin p').text();
                    let quantity = $(this).find('.value').text();
                    if (parseInt(quantity) > 0) {
                        pdf.text(`${denomination} ${quantity}x`, 10, 70 + (10 * index) + (10 * $('.bills .denomination').length));
                    }
                });
                pdf.setFontSize(14);
                pdf.text('-------------------------', 10, 80 + (10 * $('.coins .denomination').length) + (10 * $('.bills .denomination').length));
                pdf.text('Biljetten: ' + $('.bills-total p').text(), 10, 90 + (10 * $('.coins .denomination').length) + (10 * $('.bills .denomination').length));
                pdf.text('Munten: ' + $('.coins-total p').text(), 10, 100 + (10 * $('.coins .denomination').length) + (10 * $('.bills .denomination').length));
                pdf.text('TOTAAL: ' + $('.cumulative p').text(), 10, 110 + (10 * $('.coins .denomination').length) + (10 * $('.bills .denomination').length));
                // Voeg eind rapport toe
                pdf.text('--- EINDE RAPPORT ---', 10, 130 + (10 * $('.coins .denomination').length) + (10 * $('.bills .denomination').length));
                pdf.save('Teloverzicht.pdf');
            });
            
            
    </script>

    

</body>
</html>